{"data":{"markdownRemark":{"html":"<h2 id=\"title-数据准备\"><a href=\"#title-%E6%95%B0%E6%8D%AE%E5%87%86%E5%A4%87\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>title: 数据准备</h2>\n<p>　　大数据在线分析服务支持的输入数据有HDFS和iServer catalog数据，其中iServer catalog数据包括两种存储类型：大数据共享目录和空间数据库。当数据准备就绪后，在创建各类大数据分析任务时，iServer 会自动列出符合分析条件的数据集。</p>\n<ul>\n<li>大数据共享目录：支持注册本地共享目录数据和HDFS目录，支持注册的数据类型有csv数据、udb数据。</li>\n<li>空间数据库：支持 HBase、Oracle、PostgreSQL、PostGIS、MongoDB 数据库。</li>\n</ul>\n<h3 id=\"iserver-注册数据\"><a href=\"#iserver-%E6%B3%A8%E5%86%8C%E6%95%B0%E6%8D%AE\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>iServer 注册数据</h3>\n<p>　　用户可将拥有的数据库或数据文件所在目录注册到 iServer，即可以使 iServer 提供的服务访问并使用这些数据。 </p>\n<p>　　在 iServer 服务管理页面：<a href=\"http://supermapiserver:8090/iserver/manager%EF%BC%8C%E4%BE%9D%E6%AC%A1%E7%82%B9%E5%87%BB%E2%80%9C%E9%9B%86%E7%BE%A4%E2%80%9D%E2%86%92%E2%80%9C%E6%95%B0%E6%8D%AE%E6%B3%A8%E5%86%8C%E2%80%9D%EF%BC%8C%E5%8D%B3%E5%8F%AF%E5%B0%86%E4%BB%A5%E4%B8%8B%E6%95%B0%E6%8D%AE%E5%BA%93%E6%88%96%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8%E7%9B%AE%E5%BD%95%E6%B3%A8%E5%86%8C%E5%88%B0\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">http://supermapiserver:8090/iserver/manager，依次点击“集群”→“数据注册”，即可将以下数据库或数据存储目录注册到</a> iServer：</p>\n<ul>\n<li><strong>注册大数据文件共享</strong>：可将网络中共享目录、本地文件目录或 HDFS 目录，注册到 iServer 中，目录中的 csv文件、index文件、udb 数据集文件及子文件夹可用于分布式分析服务。</li>\n<li><strong>注册空间数据库</strong>：可将远程 HBase、Oracle、PostgreSQL、PostGIS、MongoDB 服务注册到 iServer，用于存储空间数据，并提供给分布式分析服务。<strong>注意</strong>，注册的MongoDB服务仅支持分布式分析服务中的叠加分析、单对象空间查询分析。</li>\n</ul>\n<h5 id=\"注册大数据文件共享\"><a href=\"#%E6%B3%A8%E5%86%8C%E5%A4%A7%E6%95%B0%E6%8D%AE%E6%96%87%E4%BB%B6%E5%85%B1%E4%BA%AB\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>注册大数据文件共享</h5>\n<p>　　iServer 分布式分析服务提供对 csv 数据和 udb 数据集的处理与分析能力。您可以将共享目录，以及HDFS 目录注册到 iServer 中，目录中的 csv文件、index文件、udb 数据集文件及子文件夹用于分布式分析服务。下面将具体为您介绍。</p>\n<ol>\n<li>\n<p>在 iServer 服务管理页面(<a href=\"http://supermapiserver:8090/iserver/manager\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">http://supermapiserver:8090/iserver/manager</a>)，依次点击“集群”→“数据注册”→“注册数据存储”，“数据存储类型”选择”大数据文件共享”。</p>\n</li>\n<li>\n<p>文件共享类型可选择以下两种：</p>\n<ul>\n<li>共享目录：可以将存储于本地或者文件共享的csv 数据和 udb 数据注册到iServer中,用于分布式分析。其中，注册的csv数据支持修改数据的字段类型。</li>\n<li>HDFS目录：为更好的适应大规模数据的 GIS 应用，推荐您使用 HDFS（Hadoop Distributed File System），即 Hadoop 分布式文件系统。它具有高容错特性，适合大规模数据集上的应用。iServer 支持注册 HDFS 中存储的 csv 数据（注册的csv数据支持修改数据的字段类型）、index文件数据.</li>\n</ul>\n</li>\n<li>\n<p>在“共享目录”中输入注册数据所在的共享路径，或在“HDFS目录”中输入csv 数据数据的路径即可。</p>\n</li>\n<li>\n<p>设置好以上参数后，单击“注册数据存储”按钮，即可将数据注册到iServer中。</p>\n</li>\n</ol>\n<p><img src=\"img/CatalogData.png\"></p>\n<h5 id=\"注册空间数据库\"><a href=\"#%E6%B3%A8%E5%86%8C%E7%A9%BA%E9%97%B4%E6%95%B0%E6%8D%AE%E5%BA%93\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>注册空间数据库</h5>\n<p>　　登录服务管理器（http://<server>:<port>/iserver/manager），依次点击进入“集群”、“数据注册”。数据存储列表中展示了所有已注册的数据存储，点击存储 ID，可查看详细的存储配置信息。</p>\n<p>　　具体配置信息如下：</p>\n<ul>\n<li>\n<p>存储 ID：为数据库创建一个唯一标识。</p>\n</li>\n<li>\n<p>数据存储类型：选择“空间数据库”。</p>\n</li>\n<li>\n<p>数据库类型：当前支持 HBase、Oracle 、 PostgreSQL、PostGIS、MongoDB。</p>\n</li>\n<li>\n<p>服务地址： 数据库连接地址。</p>\n</li>\n<li>\n<p>数据库：您将使用的数据库。</p>\n</li>\n<li>\n<p>用户名：该数据库所有者的用户名（HBASE除外）。</p>\n</li>\n<li>\n<p>密码：该数据库所有者的密码（HBASE除外）。</p>\n</li>\n<li>\n<p>允许编辑：当前仅注册的 HBase、 PostgreSQL、POSTGIS数据库支持该选项。不勾选”允许编辑”,该数据库不可作为目录服务上传关系型数据的存储节点。勾选”允许编辑”：该数据库可作为目录服务上传关系型数据的存储节点。作为上传的关系型数据的存储节点，遵循以下原则：</p>\n<ul>\n<li>当注册多个允许编辑的数据库时，优先选择数据集最少的数据库做为存储节点。</li>\n<li>当同时注册了允许编辑的数据库和iServer DataStore，则优先选择允许编辑的数据库作为存储节点，且遵循数据集最少原则。</li>\n<li>如只注册了iServer DataStore，则iServer DataStore可作为存储节点。</li>\n</ul>\n</li>\n</ul>\n<p>　　<strong>注</strong>：在进行数据注册时，如果iServer服务与HBase集群不在同一机器，需要将HBase集群各个节点所在机器的ip、主机名添加到iServer服务所在机器的hosts文件中。</p>\n<p>　　也可以通过修改数据目录服务配置文件来注册空间数据库，具体操作时，在 iserver-datacatalog.xml 中添加如下配置信息：</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"gatsby-code-text\"><code class=\"gatsby-code-text\">&lt;datastore&gt; \n&lt;datastoreType&gt;SPATIAL&lt;/datastoreType&gt; \n&lt;name&gt;postgresql2&lt;/name&gt;\n&lt;type&gt;POSTGRESQL&lt;/type&gt;   \n  &lt;connectionInfo&gt;  \n    &lt;dataBase&gt;postgres2&lt;/dataBase&gt;   \n    &lt;engineType&gt;POSTGRESQL&lt;/engineType&gt;   \n    &lt;password&gt;iserver&lt;/password&gt;   \n    &lt;server&gt;192.168.17.116&lt;/server&gt;   \n    &lt;user&gt;iserver&lt;/user&gt;   \n    &lt;connect&gt;false&lt;/connect&gt;   \n    &lt;exclusive&gt;false&lt;/exclusive&gt;   \n    &lt;openLinkTable&gt;false&lt;/openLinkTable&gt;   \n    &lt;readOnly&gt;false&lt;/readOnly&gt;  \n  &lt;/connectionInfo&gt; \n&lt;/datastore&gt; </code></pre></div>\n<p>　　其中，datastoreType、name、type 为必填参数，conectionInfo 中：dataBase、password、server、user也均为必填参数。</p>\n<h3 id=\"iserver-datastore\"><a href=\"#iserver-datastore\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>iServer DataStore</h3>\n<p>　　iServer DataStore 是一款应用程序，您可以通过 iServer DataStore 快速创建数据存储，并将数据存储与 iServer 关联起来。在 DataStore 中配置关系型数据存储时，将自动创建一个 PostgreSQL 数据库，可存储数据集。通过 iServer 大数据服务访问数据，进而可下载、上传数据，以及分析这些数据等。</p>\n<h5 id=\"环境搭建\"><a href=\"#%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>环境搭建</h5>\n<p>　　DataStore 默认端口为 8020，请先修改防火墙配置，使该端口通过。如果您的 DataStore 将安装在 Windows 系统上，请确认是否安装了 vcredist 2013，如未安装，DataStore 产品包中提供安装文件，位于 DataStore 产品包\\support\\vcredist\\vcredist_x64-2013.exe。</p>\n<ol>\n<li>在iServer DataStore 产品包d bin文件夹中，启动服务；</li>\n<li>在浏览器中输入地址：<a href=\"http://%7Bip%7D:8020\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">http://{ip}:8020</a> 访问 DataStore 配置向导，输入 iServer 管理员用户名、密码；\n　　<img src=\"img/DataStore1.png\"></li>\n<li>指定内容目录，用于存储数据、日志，备份文件等。默认为【DataStore 安装目录】\\data。注意：DataStore的内容目录暂不支持包含中文和空格的路径；\n　　<img src=\"img/DataStore2.png\"></li>\n<li>选择要创建的数据类型，目前支持关系型数据、二进制文件、切片缓存、时空数据；二进制数据和切片数据的存储能力依托于 MongoDB 数据库，需要在本机安装 MongoDB。选择创建二进制数据存储或切片数据存储后，指定本机 MongoDB 的安装路径，例如D:\\mongodb；</li>\n<li>点击完成后，等待配置成功。</li>\n<li>配置成功后，“配置状态”页面会提示iServerDataStore 的关系组件已成功配置给iServer，单击该页面中的“数据目录服务”，在跳转的页面中登录后，单击“dataimport”即可选择数据上传；\n　　<img src=\"img/DataStore4.png\"> </li>\n<li>在数据导入界面选择相应的数据，单击“上传”按钮，即可将数据上传至DataStore中。支持导入udb数据源、CSV文件、工作空间、Excel文件和GeoJson文件，且udb数据源与工作空间导入格式需为*.zip压缩文件。\n　　<img src=\"img/DataStore6.png\"> </li>\n<li>数据集上传成功后，会返回一个唯一的 dataID，如上图所示，用于代表该上传文件的数据包。单击该DataID，可查看该数据包的详细描述信息。上传成功的数据集，也会出现在 relationship/datasets 资源的“数据集列表”中。\n　　<img src=\"img/DataStore7.png\"> </li>\n<li>上传数据之后，在SuperMap iDesktop Java中通过打开刚配置好的 iServer DataStore 数据源，即可查看其中上传的数据</li>\n</ol>\n<p>　　<img src=\"img/DataStore8.png\"> </p>\n<h3 id=\"相关主题\"><a href=\"#%E7%9B%B8%E5%85%B3%E4%B8%BB%E9%A2%98\" aria-hidden=\"true\" class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><img src=\"../img/seealso.png\"> 相关主题</h3>\n<p>　　<img src=\"../img/smalltitle.png\"> <a href=\"BigDataAnalysisEnvironmentConfiguration.html\">环境配置</a></p>\n<p>　　<img src=\"../img/smalltitle.png\"> <a href=\"DensityAnalysis.html\">密度分析</a></p>","frontmatter":{"title":"","next":null,"prev":null},"fields":{"path":"content\\community\\DataPreparation.md","slug":"/community/DataPreparation.html"}}},"pageContext":{"slug":"/community/DataPreparation.html"}}